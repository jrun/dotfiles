##
# Determine whether or not some programs
# are installed.
##
which emacsclient > /dev/null
emacsclient_installed=$?

# Sometimes I'm on a server that doesn't have git
# installed so I curl the dotfiles tarball. Check
# so things that depend on git can be disabled.
which git > /dev/null
git_installed=$?

##
# rbenv
##
if [[ -a "$HOME/.rbenv/shims" ]]; then
  PATH="$HOME/.rbenv/shims:$HOME/.rbenv/bin:$PATH"
fi

##
# Platform specific
##
case `uname` in
     (Darwin)
        export JAVA_HOME='/Library/Java/Home'

        EDITOR='emacsclient --alternate-editor=mate'
     ;;
     (SunOS)
        export TERM='xterm'
     ;;
     (*)
        EDITOR='vim'
        if [ $emacsclient_installed -eq 0 ]; then
          EDITOR="emacsclient --alternate-editor=vim"
        fi
    ;;
esac

##
# env
##
export EDITOR
export SVN_EDITOR=$EDITOR
export GIT_EDITOR=$EDITOR

export PATH="$DOTFILES/bin:/usr/local/bin:/usr/local/sbin:$PATH"
export MANPATH="/usr/local/man:/usr/local/git/man:$MANPATH"
export DEV_PATH="$HOME/dev"
export HOME_DEV_PATH="$HOME/dev/h"
export WORK_DEV_PATH="$HOME/dev/w"
export OSS_DEV_PATH="$HOME/dev/oss"
export CDPATH=":$WORK_DEV_PATH:$HOME_DEV_PATH:$OSS_DEV_PATH:$DEV_PATH:$HOME:$CDPATH"
export NODE_PATH="/usr/local/lib/node_modules"

##
# aliases
##

# ls
alias ls="ls -F"
alias l="ls -lAh"
alias ll="ls -l"
alias la='ls -A'

# git
alias gai='git add -i'
alias gap='git add -p'
alias gb='git branch'
alias gc='git commit'
alias gd='git diff'
alias gdc='git diff --cached'
alias gf='git fetch'
alias gl='git log --pretty=oneline --abbrev-commit --graph --decorate'
alias gl2="git log --graph --pretty=format':%C(yellow)%h%Cblue%d%Creset %s %C(white) %an, %ar%Creset'"
alias gp='git push'
alias s='git status --short'

# tmux
alias tls='tmux list-sessions'
alias ta='tmux attach -t '

# misc
alias ..='cd ..'
alias e="$EDITOR --no-wait"
alias grep='grep --color'
alias sha256='openssl dgst -sha256'
alias mt='multitail -C'

# ruby
alias bun='bundle'
alias gempurge='gem list | cut -d" " -f1 | xargs gem uninstall -aIx'
alias rb='rbenv'
